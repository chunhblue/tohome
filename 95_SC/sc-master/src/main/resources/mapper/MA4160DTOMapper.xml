<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.com.bbut.iy.itemmaster.dao.MA4160DTOMapper">
    <resultMap id="BaseResultMap" type="cn.com.bbut.iy.itemmaster.dto.store.MA4160DTO">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="job_type_cd" jdbcType="VARCHAR" property="jobTypeCd" />
        <result column="job_catagory_name" jdbcType="VARCHAR" property="jobCatagoryName" />
        <result column="effective_sts" jdbcType="CHAR" property="effectiveSts" />
        <result column="create_user_id" jdbcType="VARCHAR" property="createUserId" />
        <result column="create_ymd" jdbcType="CHAR" property="createYmd" />
        <result column="create_hms" jdbcType="CHAR" property="createHms" />
        <result column="update_user_id" jdbcType="VARCHAR" property="updateUserId" />
        <result column="update_ymd" jdbcType="CHAR" property="updateYmd" />
        <result column="update_hms" jdbcType="VARCHAR" property="updateHms" />
        <result column="update_screen_id" jdbcType="VARCHAR" property="updateScreenId" />
        <result column="update_ip_address" jdbcType="VARCHAR" property="updateIpAddress" />
        <result column="nr_update_flg" jdbcType="CHAR" property="nrUpdateFlg" />
        <result column="nr_ymd" jdbcType="CHAR" property="nrYmd" />
        <result column="nr_hms" jdbcType="CHAR" property="nrHms" />
    </resultMap>
    <select id="selectCountByCondition" parameterType="cn.com.bbut.iy.itemmaster.dto.store.MA4160DTO" resultType="INT">
        SELECT  COUNT(*)  from  ma4160
        <where>
            <if test="ma4160ParamDTO.jobTypeCd !=null and ma4160ParamDTO.jobTypeCd!=''">
                AND lower(job_type_cd) like lower(CONCAT('%',#{ma4160ParamDTO.jobTypeCd,jdbcType=CHAR},'%'))
            </if>
            <if test="ma4160ParamDTO.jobCatagoryName !=null and ma4160ParamDTO.jobCatagoryName!='' ">
                AND lower(job_catagory_name) like lower(CONCAT('%',#{ma4160ParamDTO.jobCatagoryName,jdbcType=CHAR},'%'))
            </if>
            <if test="ma4160ParamDTO.effectiveSts !=null and ma4160ParamDTO.effectiveSts!='' ">
                AND effective_sts = #{ma4160ParamDTO.effectiveSts,jdbcType=CHAR}
            </if>
        </where>
    </select>
    <select id="selectListByCondition" parameterType="cn.com.bbut.iy.itemmaster.dto.store.MA4160DTO" resultMap="BaseResultMap">
        select  job_type_cd,job_catagory_name,effective_sts  from ma4160
    </select>
    <select id="selectAllma4160"  parameterType="cn.com.bbut.iy.itemmaster.dto.store.MA4160DTO" resultMap="BaseResultMap">
        select * from ma4160
        where effective_sts = '10'
    </select>
    <select id="search" parameterType="cn.com.bbut.iy.itemmaster.dto.store.MA4160ParamDTO" resultMap="BaseResultMap">
        select * from ma4160
        <where>
            <if test="ma4160ParamDTO.jobTypeCd !=null and ma4160ParamDTO.jobTypeCd!=''">
                AND lower(job_type_cd) like lower(CONCAT('%',#{ma4160ParamDTO.jobTypeCd,jdbcType=CHAR},'%'))
            </if>
            <if test="ma4160ParamDTO.jobCatagoryName !=null and ma4160ParamDTO.jobCatagoryName!='' ">
            AND lower(job_catagory_name) like lower(CONCAT('%',#{ma4160ParamDTO.jobCatagoryName,jdbcType=CHAR},'%'))
        </if>
            <if test="ma4160ParamDTO.effectiveSts !=null and ma4160ParamDTO.effectiveSts!='' ">
                AND effective_sts = #{ma4160ParamDTO.effectiveSts,jdbcType=CHAR}
            </if>
        </where>
        LIMIT ${ma4160ParamDTO.rows} OFFSET ${ma4160ParamDTO.limitStart}
    </select>
</mapper>